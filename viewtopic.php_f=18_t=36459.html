<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-gb" xml:lang="en-gb">
<head>


<style type="text/css">
#global { width: 100%; }
</style>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="content-language" content="en-gb" />
<meta http-equiv="imagetoolbar" content="no" />


<title>Lancers Reactor Forums &bull; View topic - New guns via XML/FLMM issue... SOLVED</title>

<link href="./styles/ca_orbital/theme/stylesheet.css" rel="stylesheet" type="text/css" media="screen, projection" />
<link media="only screen and (max-device-width: 480px)" href="./styles/ca_orbital/theme/iphone.css" type="text/css" rel="stylesheet" />

</head>

<body id="phpbb" class="section- ltr">
<div id="main">

<p class="top"><a id="top" name="top" accesskey="t"></a></p>

<div id="global" style="margin: 0 auto;">

    <p class="skiplink"><a href="#start_here">Skip to content</a></p>

	<!-- header start -->
    <div id="topnav">
        <div class="left"></div>
        <div class="right"></div>
        <ul class="linklist topnav leftside">
            <li>
                <a href="https://the-starport.com" title="The Starport">The Starport</a>
            </li>
            <li>
                <span>&bull;</span>
                <a href="https://the-starport.net/discord" title="The Starport Discord">Discord</a>
            </li>
        </ul>
    </div>
    

	<div id="logo"><a href="./index.php.html"><img src="./styles/ca_orbital/imageset/tlr_logo.png" alt="" title=""><span>Lancers Reactor Forums</span></a></div>
	<!-- header end -->

    <div id="page-header-msg">
		<div class="block-header"><span></span><div></div></div>
       <div class="block-content"><div class="block-inner"><div class="block-inner2">
            	
		<table width="100%">
			<tbody><tr><td style="text-align:center;width:100%;">

            <h2 style="color:red;">Important Message</h2>
            <h3>You are browsing the archived Lancers Reactor forums. You cannot register or login.<br>
            The content may be outdated and links may not be functional.</h3><br>
            <h4>To get the latest in Freelancer news, mods, modding and downloads, go to<br>
            	<a href="https://the-starport.com">The-Starport</a></h4>
    	</td></tr> 
    </tbody></table>
    
    	</div></div></div>
    <div class="block-footer"><span></span><div></div></div>
	</div>
    <p></p>
	<div id="page-header">
		<div class="navbar navbar-top" id="navbar-top">
            <div class="block-header"><span></span><div></div></div>
            <div class="block-content"><div class="block-inner"><div class="block-inner2">
            <ul class="linklist navlinks">
                <li class="icon-home"><span class="home-extra"><a href="./index.php.html" accesskey="h">Board index</a>  <strong>&#8249;</strong> <a href="./viewforum.php_f=75.html">Freelancer Editing</a> <strong>&#8249;</strong> </span><a href="./viewforum.php_f=18.html">Freelancer General Editing Forum</a></li>
            </ul>
            <div class="block-clear"></div>
            </div></div></div>
            <div class="block-footer"><span></span><div></div></div>
		</div>
	</div>
    <p></p>

	<a name="start_here"></a>

	<div id="page-body">
		<div id="content-start"></div>
<h2 class="leftside"><a href="./viewtopic.php_f=18_t=36459" id="topic-title">New guns via XML/FLMM issue... SOLVED</a></h2>

<p class="rightside">
    
</p>
<div class="clear"></div>
<p class="forum-desc">The general place to discuss MOD''ing Freelancer! </p>

<div class="topic-actions">

	<div class="buttons">
	
		<div class="reply-icon"><a href="" title="Post a reply"><span></span>Post a reply</a></div>
	
	</div>

	
		<div class="pagination">
			15 posts
			 &bull; Page <strong>1</strong> of <strong>1</strong>
		</div>
	

</div>
<div class="clear"></div>


	<div id="p27356" class="post">
		<div class="block-border block-block block-post block-post-first"><div class="block-header"><span></span><div></div></div><div class="block-content"><div class="block-inner"><div class="block-inner2">
        <div class="post-maximize" style="display: none;"></div>
        <div class="post-profile-block">
        <div class="profile-block">
        <div class="postprofile">
            <div class="profile-top">
                <p class="profile-author">
                    <a class="profile-link popup-link" id="popup-link-0" href="javascript:void(0);">Argh</a>
                </p>
                
            </div>
            

            <div class="profile-details">
                
            </div>
		</div>
		</div>
		</div>
		

        
		<div class="postbody">
		    <div class="post-content">
			

			<p class="author"><a href=""><img src="./styles/ca_orbital/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" /></a> Thu Dec 02, 2004 6:22 am <span class="post-author-inline" style="display: none;">by Argh</span></p>

			<h3 class="first"><a href="#p27356" class="post-subject">New guns via XML/FLMM issue... SOLVED</a></h3>

			

			<div class="content">EDIT:  This problem is now solved.  Please see entry at the bottom for the solution.  The rest of the post (minus some code chunks) will be preserved for posterity.
<br />
<br />Howdy folks... Argh here, with another pain-in-the-rear problem.
<br />
<br />It should be very simple:  I need to create custom weapons for my mod.  I've already developed the custom weapons, their behavior and sounds, etc., in previous versions, using the good ol' Liberty Justices.  But now it's time to get rid of the old weapons (not coincidentally, removing Cloak and about 400 other useless entries in weapon_equip.ini, that I don't plan to use in the mod, along with all of the Loadouts I don't want... but that's after I figure out what's going wrong here)
<br />
<br />First off, here's the error message I'm getting:
<br />
<br />E:\FL\Scratch\Source\Common\Archetype.cpp(60) : *** ERROR: ArchDB::Get(3164109194) failed
<br />E:\FL\Scratch\Source\Common\Archetype.cpp(60) : *** ERROR: ArchDB::Get(30) failed
<br />
<br />At one point, I was even getting CTD, but I cleaned everything up, and now I don't get that... just a stubborn refusal to cooperate and play nice.  I can *buy* this new weapon, and it works just fine in the game... but if I try to put it in an AI aircraft's Loadout... it fails to appear, and FLServer spits that error message up every time an aircraft armed with that weapon is spawned.  It'll appear if I *buy* it, mind you- but putting it there as an equip = operation doesn't work, period.
<br />
<br />Worse, putting it into the player's Loadout doesn't work right, either.  So obviously this error isn't minor or ignorable, and I've gotta conquer it before I go on my wild looting spree among the Loadouts and weapon_equip.ini, cleaning out the deadwood.
<br />
<br />Now, here's the code I'm using to implement the &quot;test weapon&quot;, both as a weapon and as a Good:
<br />
<br />&lt;script&gt;
<br />&lt;data file=&quot;DATA\EQUIPMENT\weapon_equip.ini&quot; method=&quot;append&quot;&gt;
<br />&lt;source&gt;
<br />[Munition
<br />nickname = 30_cal_ammo
<br />
<br />....more code went here, but is no longer needed, as this is where the problem was.
<br />
<br />Oh yeah.. and I should note, for the record... it's NOT the custom CMP file I'm using, or the sounds, or any of that.  All of those have been functioning flawlessly for the last 3 Alphas.  It's definately a coding issue here...
<br />
<br />Edited by - Argh on 12/3/2004 2:55:07 AM</div>

			
            </div>

		
            <ul class="profile-icons">
        		<li class="top-icon"><a href="#top" class="top" title="Top"><span>Top</span></a></li>
                
            </ul>
		

            <div class="clear"></div>
		</div>

        

		<div class="block-clear"></div></div></div></div><div class="block-footer"><span></span><div></div></div></div>
	</div>


	<div id="p343165" class="post">
		<div class="block-border block-block block-post"><div class="block-header"><span></span><div></div></div><div class="block-content"><div class="block-inner"><div class="block-inner2">
        <div class="post-maximize" style="display: none;"></div>
        <div class="post-profile-block">
        <div class="profile-block">
        <div class="postprofile">
            <div class="profile-top">
                <p class="profile-author">
                    <a class="profile-link popup-link" id="popup-link-1" href="javascript:void(0);">Argh</a>
                </p>
                
            </div>
            

            <div class="profile-details">
                
            </div>
		</div>
		</div>
		</div>
		

        
		<div class="postbody">
		    <div class="post-content">
			

			<p class="author"><a href=""><img src="./styles/ca_orbital/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" /></a> Thu Dec 02, 2004 6:53 am <span class="post-author-inline" style="display: none;">by Argh</span></p>

			<h3><a href="#p343165" class="post-subject"></a></h3>

			

			<div class="content">While I'm on this rampage... I don't suppose one of our more informed members could help me with another issue...
<br />
<br />Basically, I'd like a list of all of the things that MUST stay in the game to keep it from CTD.
<br />
<br />I want to strip *everything* else.  Every System, every Weapon, every piece of Equipment.  Everything.  I've been working on this &quot;sandbox&quot; for quite awhile, but in a very haphazard fashion.   And the results would be well-worth it for everybody- if I can get it working, then... we'd have the door wide-open to a lot more TC mods with fewer bugs.  But I'm getting stumped over and over again by the game engine's stubborn refusal to let me remove things.  
<br />
<br />For example... strip out mbases.ini down to just one System (non-buggy and previously working, and the system that newplayer.ini points to) ... CTD.  Same with Universe.ini.  Same with weapon_equip.ini.  What the heck?!?  I can strip out misc_goods.ini completely, but I can't strip out the Systems I'm not using?  Why?  Do I need to blank every System's INI, every Room, and every Mission to get rid of these stupid errors where the engine's refusing to just fail gracefully?
<br />
<br />Anybody know where I can find this information?  I'm getting tired of having FL crash all the time, in my quest to remove the redundant or irrelevant, especially as the crashes are rarely helpful (i.e., there isn't a clue left in Spew, if you'll pardon the rhyme).</div>

			
            </div>

		
            <ul class="profile-icons">
        		<li class="top-icon"><a href="#top" class="top" title="Top"><span>Top</span></a></li>
                
            </ul>
		

            <div class="clear"></div>
		</div>

        

		<div class="block-clear"></div></div></div></div><div class="block-footer"><span></span><div></div></div></div>
	</div>


	<div id="p343193" class="post">
		<div class="block-border block-block block-post"><div class="block-header"><span></span><div></div></div><div class="block-content"><div class="block-inner"><div class="block-inner2">
        <div class="post-maximize" style="display: none;"></div>
        <div class="post-profile-block">
        <div class="profile-block">
        <div class="postprofile">
            <div class="profile-top">
                <p class="profile-author">
                    <a class="profile-link popup-link" id="popup-link-2" href="javascript:void(0);">RimShot</a>
                </p>
                
            </div>
            

            <div class="profile-details">
                
            </div>
		</div>
		</div>
		</div>
		

        
		<div class="postbody">
		    <div class="post-content">
			

			<p class="author"><a href=""><img src="./styles/ca_orbital/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" /></a> Thu Dec 02, 2004 8:09 am <span class="post-author-inline" style="display: none;">by RimShot</span></p>

			<h3><a href="#p343193" class="post-subject"></a></h3>

			

			<div class="content">units_per_container i`ve noticed to be entry for the ammunition part ..
<br />
<br />i don`t know if that`s a problem tho, just what i found</div>

			
            </div>

		
            <ul class="profile-icons">
        		<li class="top-icon"><a href="#top" class="top" title="Top"><span>Top</span></a></li>
                
            </ul>
		

            <div class="clear"></div>
		</div>

        

		<div class="block-clear"></div></div></div></div><div class="block-footer"><span></span><div></div></div></div>
	</div>


	<div id="p343194" class="post">
		<div class="block-border block-block block-post"><div class="block-header"><span></span><div></div></div><div class="block-content"><div class="block-inner"><div class="block-inner2">
        <div class="post-maximize" style="display: none;"></div>
        <div class="post-profile-block">
        <div class="profile-block">
        <div class="postprofile">
            <div class="profile-top">
                <p class="profile-author">
                    <a class="profile-link popup-link" id="popup-link-3" href="javascript:void(0);">Argh</a>
                </p>
                
            </div>
            

            <div class="profile-details">
                
            </div>
		</div>
		</div>
		</div>
		

        
		<div class="postbody">
		    <div class="post-content">
			

			<p class="author"><a href=""><img src="./styles/ca_orbital/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" /></a> Thu Dec 02, 2004 8:11 am <span class="post-author-inline" style="display: none;">by Argh</span></p>

			<h3><a href="#p343194" class="post-subject"></a></h3>

			

			<div class="content">Dunno either... it wasn't causing a problem before, but lemme see if dumping it helps...</div>

			
            </div>

		
            <ul class="profile-icons">
        		<li class="top-icon"><a href="#top" class="top" title="Top"><span>Top</span></a></li>
                
            </ul>
		

            <div class="clear"></div>
		</div>

        

		<div class="block-clear"></div></div></div></div><div class="block-footer"><span></span><div></div></div></div>
	</div>


	<div id="p343195" class="post">
		<div class="block-border block-block block-post"><div class="block-header"><span></span><div></div></div><div class="block-content"><div class="block-inner"><div class="block-inner2">
        <div class="post-maximize" style="display: none;"></div>
        <div class="post-profile-block">
        <div class="profile-block">
        <div class="postprofile">
            <div class="profile-top">
                <p class="profile-author">
                    <a class="profile-link popup-link" id="popup-link-4" href="javascript:void(0);">Argh</a>
                </p>
                
            </div>
            

            <div class="profile-details">
                
            </div>
		</div>
		</div>
		</div>
		

        
		<div class="postbody">
		    <div class="post-content">
			

			<p class="author"><a href=""><img src="./styles/ca_orbital/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" /></a> Thu Dec 02, 2004 8:24 am <span class="post-author-inline" style="display: none;">by Argh</span></p>

			<h3><a href="#p343195" class="post-subject"></a></h3>

			

			<div class="content">No dice.  Put the 30_cal back into the MP_ge_loadout ... CTD.  What in the name of good graciousness is going on here... I also see references to the game engine looking for (and not finding) things like Lights in Spew, and I got the following from Spew that might help... maybe... ish...
<br />
<br />E:\FL\Scratch\Source\Client\LoginMgr.cpp(351) : NOTICE:General:Starting single player game.
<br />E:\FL\Scratch\Source\Client\Gf\LocationController.cpp(1029) : *** WARNING: Failed to get start location
<br />E:\FL\Scratch\Source\DALib\DALib.cpp(376) : WARNING:General:******* DA SYSTEM: trailing references *******
<br />E:\FL\Scratch\Source\DALib\DALib.cpp(376) : WARNING:General:******* DA SYSTEM: trailing references *******
<br />
<br />Now, I have the OpenSP hack installed... why am I seeing this just before CTD?!?  And everything works perfectly, until I add that new weapon to the starting Loadout.  Switching in li_gun01_mark01... it's just fine.
<br />
<br />I'm also getting a ton of Spew about the bad SURs I currently have in place... Anton's newest Beta FLModel Tool is supposed to fix that... I'm going to re-do all of the SURs and then come back to this problem...</div>

			
            </div>

		
            <ul class="profile-icons">
        		<li class="top-icon"><a href="#top" class="top" title="Top"><span>Top</span></a></li>
                
            </ul>
		

            <div class="clear"></div>
		</div>

        

		<div class="block-clear"></div></div></div></div><div class="block-footer"><span></span><div></div></div></div>
	</div>


	<div id="p343205" class="post">
		<div class="block-border block-block block-post"><div class="block-header"><span></span><div></div></div><div class="block-content"><div class="block-inner"><div class="block-inner2">
        <div class="post-maximize" style="display: none;"></div>
        <div class="post-profile-block">
        <div class="profile-block">
        <div class="postprofile">
            <div class="profile-top">
                <p class="profile-author">
                    <a class="profile-link popup-link" id="popup-link-5" href="javascript:void(0);">RimShot</a>
                </p>
                
            </div>
            

            <div class="profile-details">
                
            </div>
		</div>
		</div>
		</div>
		

        
		<div class="postbody">
		    <div class="post-content">
			

			<p class="author"><a href=""><img src="./styles/ca_orbital/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" /></a> Thu Dec 02, 2004 9:03 am <span class="post-author-inline" style="display: none;">by RimShot</span></p>

			<h3><a href="#p343205" class="post-subject"></a></h3>

			

			<div class="content">and you have been checking if all entries are at there place after activating the mod?
<br />
<br />because you have 2 script open/close commands, did you really intend that? i`m assuming you know what you`re doing ..
<br />
<br />just a thought
<br />
<br />EDIT: ok forget it, non sense .. i remember you said that you can buy it with no probs ..
<br />
<br />Edited by - RimShot on 12/2/2004 9:03:59 AM</div>

			
            </div>

		
            <ul class="profile-icons">
        		<li class="top-icon"><a href="#top" class="top" title="Top"><span>Top</span></a></li>
                
            </ul>
		

            <div class="clear"></div>
		</div>

        

		<div class="block-clear"></div></div></div></div><div class="block-footer"><span></span><div></div></div></div>
	</div>


	<div id="p343211" class="post">
		<div class="block-border block-block block-post"><div class="block-header"><span></span><div></div></div><div class="block-content"><div class="block-inner"><div class="block-inner2">
        <div class="post-maximize" style="display: none;"></div>
        <div class="post-profile-block">
        <div class="profile-block">
        <div class="postprofile">
            <div class="profile-top">
                <p class="profile-author">
                    <a class="profile-link popup-link" id="popup-link-6" href="javascript:void(0);">Argh</a>
                </p>
                
            </div>
            

            <div class="profile-details">
                
            </div>
		</div>
		</div>
		</div>
		

        
		<div class="postbody">
		    <div class="post-content">
			

			<p class="author"><a href=""><img src="./styles/ca_orbital/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" /></a> Thu Dec 02, 2004 9:17 am <span class="post-author-inline" style="display: none;">by Argh</span></p>

			<h3><a href="#p343211" class="post-subject"></a></h3>

			

			<div class="content">Sure, I have two &lt;script&gt; tags... these are two pieces of XML.  The current Beta of my mod has over 10 different XML scripts in it... and they're all opened and closed with &lt;script&gt; &lt;/script&gt;, just like they should be.  And all of them except for these are working just fine... it's just these ones that aren't <img src="./images/smilies/icon_razz.gif" alt=":-P" title="Razz" />
<br />
<br />OK... now I just went back and added that weapon_good line in the old-fashioned way (minus the id_name stuff, obviously), and tried that out...  CTD.
<br />
<br />Tried renaming everything to 30_cal01_mark01... etc... CTD.
<br />
<br />Removed the IDS tags... CTD... so it's not that the XML's naming is doing it.  Same darn error from Spew:
<br />
<br />*** WARNING: StarSystem::exit(): CLI(1) System(FP7_system)
<br />E:\FL\Scratch\Source\Common\Archetype.cpp(60) : *** ERROR: ArchDB::Get(30) failed
<br />
<br />
<br />Edited by - Argh on 12/2/2004 9:31:21 AM</div>

			
            </div>

		
            <ul class="profile-icons">
        		<li class="top-icon"><a href="#top" class="top" title="Top"><span>Top</span></a></li>
                
            </ul>
		

            <div class="clear"></div>
		</div>

        

		<div class="block-clear"></div></div></div></div><div class="block-footer"><span></span><div></div></div></div>
	</div>


	<div id="p343220" class="post">
		<div class="block-border block-block block-post"><div class="block-header"><span></span><div></div></div><div class="block-content"><div class="block-inner"><div class="block-inner2">
        <div class="post-maximize" style="display: none;"></div>
        <div class="post-profile-block">
        <div class="profile-block">
        <div class="postprofile">
            <div class="profile-top">
                <p class="profile-author">
                    <a class="profile-link popup-link" id="popup-link-7" href="javascript:void(0);">Argh</a>
                </p>
                
            </div>
            

            <div class="profile-details">
                
            </div>
		</div>
		</div>
		</div>
		

        
		<div class="postbody">
		    <div class="post-content">
			

			<p class="author"><a href=""><img src="./styles/ca_orbital/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" /></a> Thu Dec 02, 2004 9:42 am <span class="post-author-inline" style="display: none;">by Argh</span></p>

			<h3><a href="#p343220" class="post-subject"></a></h3>

			

			<div class="content">Switched back to li_gun01_mark01 ... no problem.  And guess where all those stats, the CMP reference and everything else in my spiffy XML came from???  So it ain't the stats, the weapon_good reference, the market_misc... something's really strange and annoying here...
<br />
<br />I mean, it even shows up with the proper NAME and it even had a DESCRIPTION, before I cut all of that out... but it won't go on a Loadout, period.  You can buy it, it'll work as advertised, and it's no longer generating server-side spew, but if you try to give it to a player at the start of the game... CTD <img src=smilies/icon_smile_sad.gif width=15 height=15 border=0 align=middle>
<br />
<br />I'll see whether I can give it to 'em as Cargo.  Better than nothin', I guess... hopefully that won't CTD too... and the AI's already using different guns than players (for game-balance purposes)... so that's no big deal, either... unlike most mods, I don't have to worry about that issue, as the AI's never going to use the same guns as players anyhow... so I'll just ... ugh... re-use existing guns, whereever I need to have AI-equipable weapons.  Sheesh... at least I only have about 15 weapons planned, so this won't become a total nightmare.
<br />
<br />Here, let's take a look at somebody else's code.  Maybe I missed something so basic, so fundamental.. that it should be obvious...
<br />
<br />
<br />
<br />&lt;data file=&quot;DATA\EQUIPMENT\weapon_equip.ini&quot; method=&quot;append&quot;&gt;
<br />&lt;source&gt;
<br />;///////////////////////////////////////////////
<br />[Munition
<br />nickname = prometheus_gun_ammo
<br />
<br />Note... that this Nickname does NOT start with a number... and mine does.
<br />
<br />Edited by - Argh on 12/3/2004 2:47:19 AM</div>

			
            </div>

		
            <ul class="profile-icons">
        		<li class="top-icon"><a href="#top" class="top" title="Top"><span>Top</span></a></li>
                
            </ul>
		

            <div class="clear"></div>
		</div>

        

		<div class="block-clear"></div></div></div></div><div class="block-footer"><span></span><div></div></div></div>
	</div>


	<div id="p343236" class="post">
		<div class="block-border block-block block-post"><div class="block-header"><span></span><div></div></div><div class="block-content"><div class="block-inner"><div class="block-inner2">
        <div class="post-maximize" style="display: none;"></div>
        <div class="post-profile-block">
        <div class="profile-block">
        <div class="postprofile">
            <div class="profile-top">
                <p class="profile-author">
                    <a class="profile-link popup-link" id="popup-link-8" href="javascript:void(0);">Argh</a>
                </p>
                
            </div>
            

            <div class="profile-details">
                
            </div>
		</div>
		</div>
		</div>
		

        
		<div class="postbody">
		    <div class="post-content">
			

			<p class="author"><a href=""><img src="./styles/ca_orbital/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" /></a> Thu Dec 02, 2004 10:27 am <span class="post-author-inline" style="display: none;">by Argh</span></p>

			<h3><a href="#p343236" class="post-subject"></a></h3>

			

			<div class="content">Ugh.  I don't see anything here, either.  Of course, the Promethius mod doesn't have this weapon in AI Loadouts, either... and every mod I've seen with weapons used by the AI... doesn't use XML/FLMM to do these sorts of things.  So maybe FLMM just can't do this reliably... or I needed to do this in a more subtle fashion.  
<br />
<br />I sent off an email to IGx89 about this... maybe he'll tell me where I've gone wrong here.  I haven't yet found a code example where somebody else has done this, though... of course, I haven't seen any mods that are doing some of the other weird things I've been doing, either, so maybe I just out-weirded myself <img src=smilies/icon_smile_wink.gif width=15 height=15 border=0 align=middle></div>

			
            </div>

		
            <ul class="profile-icons">
        		<li class="top-icon"><a href="#top" class="top" title="Top"><span>Top</span></a></li>
                
            </ul>
		

            <div class="clear"></div>
		</div>

        

		<div class="block-clear"></div></div></div></div><div class="block-footer"><span></span><div></div></div></div>
	</div>


	<div id="p343274" class="post">
		<div class="block-border block-block block-post"><div class="block-header"><span></span><div></div></div><div class="block-content"><div class="block-inner"><div class="block-inner2">
        <div class="post-maximize" style="display: none;"></div>
        <div class="post-profile-block">
        <div class="profile-block">
        <div class="postprofile">
            <div class="profile-top">
                <p class="profile-author">
                    <a class="profile-link popup-link" id="popup-link-9" href="javascript:void(0);">parabolix</a>
                </p>
                
            </div>
            

            <div class="profile-details">
                
            </div>
		</div>
		</div>
		</div>
		

        
		<div class="postbody">
		    <div class="post-content">
			

			<p class="author"><a href=""><img src="./styles/ca_orbital/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" /></a> Thu Dec 02, 2004 1:26 pm <span class="post-author-inline" style="display: none;">by parabolix</span></p>

			<h3><a href="#p343274" class="post-subject"></a></h3>

			

			<div class="content">Argh, the problem is most likely in loadouts.ini. Archetype errors occur when there is false equipment designated in loadouts.ini. When the game looks for it, it doesnt find it, and causes a crash. If you email me some files I can try to help you out. If the problem is in your weaponry, I would need access to weapon_equip.ini, weapon_good.ini, and loadouts.ini. If you'd like, I could email you my MSN address, and we could talk via that. Your choice <img src=smilies/icon_smile.gif width=15 height=15 border=0 align=middle>
<br />
<br />Also, trailing references means that there are spaces after text somewhere in your files. They can cause errors as well
<br />
<br />-Para
<br />
<br />Edited by - parabolix on 12/2/2004 1:38:28 PM</div>

			
            </div>

		
            <ul class="profile-icons">
        		<li class="top-icon"><a href="#top" class="top" title="Top"><span>Top</span></a></li>
                
            </ul>
		

            <div class="clear"></div>
		</div>

        

		<div class="block-clear"></div></div></div></div><div class="block-footer"><span></span><div></div></div></div>
	</div>


	<div id="p343283" class="post">
		<div class="block-border block-block block-post"><div class="block-header"><span></span><div></div></div><div class="block-content"><div class="block-inner"><div class="block-inner2">
        <div class="post-maximize" style="display: none;"></div>
        <div class="post-profile-block">
        <div class="profile-block">
        <div class="postprofile">
            <div class="profile-top">
                <p class="profile-author">
                    <a class="profile-link popup-link" id="popup-link-10" href="javascript:void(0);">Mephistopheles</a>
                </p>
                
            </div>
            

            <div class="profile-details">
                
            </div>
		</div>
		</div>
		</div>
		

        
		<div class="postbody">
		    <div class="post-content">
			

			<p class="author"><a href=""><img src="./styles/ca_orbital/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" /></a> Thu Dec 02, 2004 2:05 pm <span class="post-author-inline" style="display: none;">by Mephistopheles</span></p>

			<h3><a href="#p343283" class="post-subject"></a></h3>

			

			<div class="content">&quot;Ugh. I don't see anything here, either. Of course, the Promethius mod doesn't have this weapon in AI Loadouts, either&quot;
<br />
<br />Erm... Please spell Prometheus right. <img src=smilies/icon_smile_wink.gif width=15 height=15 border=0 align=middle>
<br />Did you try version 1.1 of my mod? Hehe, now go out and fight those NPCs with exactly the same loadouts as the player. Crash-free.
<br />
<br />Anyway, I assume while cleaning up old, unsused stuff, it might be very likely that somewhere there could still be a hidden reference to anything not in existence now, or changed. The safest method is to simply add stuff, then you have limited possibility of crash causes to search through. <img src=smilies/icon_smile_wink.gif width=15 height=15 border=0 align=middle>
<br />
<br />btw: Somehow I feel proud to get my code quoted. <img src='./images/smilies/icon_biggrin.gif' width=15 height=15 border=0 align=middle></div>

			
            </div>

		
            <ul class="profile-icons">
        		<li class="top-icon"><a href="#top" class="top" title="Top"><span>Top</span></a></li>
                
            </ul>
		

            <div class="clear"></div>
		</div>

        

		<div class="block-clear"></div></div></div></div><div class="block-footer"><span></span><div></div></div></div>
	</div>


	<div id="p343307" class="post">
		<div class="block-border block-block block-post"><div class="block-header"><span></span><div></div></div><div class="block-content"><div class="block-inner"><div class="block-inner2">
        <div class="post-maximize" style="display: none;"></div>
        <div class="post-profile-block">
        <div class="profile-block">
        <div class="postprofile">
            <div class="profile-top">
                <p class="profile-author">
                    <a class="profile-link popup-link" id="popup-link-11" href="javascript:void(0);">harrier</a>
                </p>
                
            </div>
            

            <div class="profile-details">
                
            </div>
		</div>
		</div>
		</div>
		

        
		<div class="postbody">
		    <div class="post-content">
			

			<p class="author"><a href=""><img src="./styles/ca_orbital/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" /></a> Thu Dec 02, 2004 3:17 pm <span class="post-author-inline" style="display: none;">by harrier</span></p>

			<h3><a href="#p343307" class="post-subject"></a></h3>

			

			<div class="content">Argh,
<br />
<br />One of my biggest bugbears is trailing references, as they often pop up as the last lines in flspew after a crash.... My theory is that if there are enough of them then they will cause a crash by accumulation, if nothing else. the problem is that one single space in the wrong place ie at the end of a line of code is enough...
<br />
<br />Freelancer is very picky...
<br />
<br />Harrier.
<br />
<br /><img src='http://members.optusnet.com.au/~audioele/mypic103.jpg'>
<br />Retreat[![! ---- I'm too badly messed up now[![!</div>

			
            </div>

		
            <ul class="profile-icons">
        		<li class="top-icon"><a href="#top" class="top" title="Top"><span>Top</span></a></li>
                
            </ul>
		

            <div class="clear"></div>
		</div>

        

		<div class="block-clear"></div></div></div></div><div class="block-footer"><span></span><div></div></div></div>
	</div>


	<div id="p343390" class="post">
		<div class="block-border block-block block-post"><div class="block-header"><span></span><div></div></div><div class="block-content"><div class="block-inner"><div class="block-inner2">
        <div class="post-maximize" style="display: none;"></div>
        <div class="post-profile-block">
        <div class="profile-block">
        <div class="postprofile">
            <div class="profile-top">
                <p class="profile-author">
                    <a class="profile-link popup-link" id="popup-link-12" href="javascript:void(0);">Argh</a>
                </p>
                
            </div>
            

            <div class="profile-details">
                
            </div>
		</div>
		</div>
		</div>
		

        
		<div class="postbody">
		    <div class="post-content">
			

			<p class="author"><a href=""><img src="./styles/ca_orbital/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" /></a> Thu Dec 02, 2004 11:36 pm <span class="post-author-inline" style="display: none;">by Argh</span></p>

			<h3><a href="#p343390" class="post-subject"></a></h3>

			

			<div class="content">Mephistopheles:
<br />
<br />Erm, sorry 'bout that... I was typing rather hastily at that point <img src=smilies/icon_smile_wink.gif width=15 height=15 border=0 align=middle>
<br />
<br />At any rate, I've mailed what I've got to Parabolix, and I'll look over your current code.
<br />
<br />The whole &quot;quest to remove everything&quot; is another issue entirely.  Based on early experiments, it seems that content.dll is involved, and is calling things... which if they do not exist, cause the game to hang.  So I'm probably going to have to look around in there and see what, exactly, needs to be kept- or learn how to delete such references from content.dll, so that they never get called in the first place.  Just removing entries wholesale from the INIs does zero good... the game just CTD's on start, and so does the server.  Which is rather annoying, since the game will tolerate removing some things, but not others... and it's not quite clear where this dividing line is.
<br />
<br />The reason why I want to do this (but probably won't get anywhere near doing for Beta 1) is simple:  if you could strip the codebase of everything FL-related, then building new mods would be a snap.  No more worrying about CTD related to the NY System... because it'd be gone, for example.  And the drop in memory usage on the server and client end would be huge!  Let's face it- the FL engine loads up tons of things that it's never, ever going to use.  And if modders could start with a blank slate, then they'd be better off.
<br />
<br />Edited by - Argh on 12/2/2004 11:42:44 PM</div>

			
            </div>

		
            <ul class="profile-icons">
        		<li class="top-icon"><a href="#top" class="top" title="Top"><span>Top</span></a></li>
                
            </ul>
		

            <div class="clear"></div>
		</div>

        

		<div class="block-clear"></div></div></div></div><div class="block-footer"><span></span><div></div></div></div>
	</div>


	<div id="p343401" class="post">
		<div class="block-border block-block block-post"><div class="block-header"><span></span><div></div></div><div class="block-content"><div class="block-inner"><div class="block-inner2">
        <div class="post-maximize" style="display: none;"></div>
        <div class="post-profile-block">
        <div class="profile-block">
        <div class="postprofile">
            <div class="profile-top">
                <p class="profile-author">
                    <a class="profile-link popup-link" id="popup-link-13" href="javascript:void(0);">Argh</a>
                </p>
                
            </div>
            

            <div class="profile-details">
                
            </div>
		</div>
		</div>
		</div>
		

        
		<div class="postbody">
		    <div class="post-content">
			

			<p class="author"><a href=""><img src="./styles/ca_orbital/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" /></a> Fri Dec 03, 2004 2:40 am <span class="post-author-inline" style="display: none;">by Argh</span></p>

			<h3><a href="#p343401" class="post-subject"></a></h3>

			

			<div class="content">EEEEEEUREKA.
<br />
<br />The problem is solved... and guess what?  Like most coding mistakes, it was both:
<br />
<br />A.  Blindingly obvious, once discovered.
<br />B.  A problem of perception.
<br />
<br />I was obsessive about the ArchDB error involving &quot;30&quot;.
<br />
<br />Guess what, folks... that &quot;30&quot; was the &quot;30&quot; at the start of the nickname... NOT an IDS reference.  Once I'd gotten to the point where I realised that it wasn't an ID issue, I went caroming through everything.  I removed every excess line-break I found in my code (even where they hadn't been causing problems previously)... and what I needed to do was re-write my code like this:
<br />
<br />&lt;script&gt;
<br />&lt;data file=&quot;DATA\EQUIPMENT\weapon_equip.ini&quot; method=&quot;append&quot;&gt;
<br />&lt;source&gt;
<br />
<br />[Munition
<br />nickname = thirty_cal_ammo
<br />hp_type = hp_gun
<br />requires_ammo = false
<br />hit_pts = 2
<br />hull_damage = 200
<br />energy_damage = 0
<br />weapon_type = W_Laser01
<br />one_shot_sound = machinegun1
<br />munition_hit_effect = li_laser_02_impact
<br />const_effect = machinegun1_proj
<br />lifetime = 0.800000
<br />force_gun_ori = true
<br />mass = 1
<br />volume = 0.000100
<br />
<br />[Gun
<br />nickname = thirty_cal
<br />ids_name = 0 ;GENERATESTRRES(&quot;30 Cal. Machinegun&quot; )
<br />ids_info = 0 ;GENERATEXMLRES(&quot;&lt;xml&gt;&lt;/xml&gt;&quot; )
<br />DA_archetype = equipment\models\agt\chaingun.cmp
<br />material_library = equipment\models\agt\chaingun.cmp
<br />HP_child = HPConnect
<br />hit_pts = 400
<br />explosion_resistance = 1.000000
<br />debris_type = debris_normal
<br />parent_impulse = 20
<br />child_impulse = 80
<br />volume = 3
<br />mass = 10
<br />hp_gun_type = hp_gun_special_1
<br />damage_per_fire = 0
<br />power_usage = 10
<br />refire_delay = 0.1
<br />muzzle_velocity = 1200
<br />use_animation = Sc_fire
<br />toughness = 1.300000
<br />flash_particle_name = li_laser_01_flash
<br />flash_radius = 15
<br />light_anim = l_gun01_flash
<br />projectile_archetype = thirty_cal_ammo
<br />separation_explosion = sever_debris
<br />auto_turret = false
<br />turn_rate = 0
<br />lootable = true
<br />LODranges = 0, 200
<br />&lt;/source&gt;
<br />&lt;/data&gt;
<br />&lt;/script&gt;
<br />
<br />See?  Changed the &quot;30_cal&quot; to &quot;thirty_cal&quot;... and problem solved!  
<br />
<br />Sooooo... now we know.  Start the nickname of a thing with a number... and the FL engine doesn't like it.  This has been tested with MP and SP starting Loadouts, as well as with the AI.  The problem is totally gone, and I'm not seeing errors in Spew.  Kewl... now, where was I?  Oh yeah, I was building a mod...
<br />
<br />Edited by - Argh on 12/3/2004 2:49:18 AM</div>

			
            </div>

		
            <ul class="profile-icons">
        		<li class="top-icon"><a href="#top" class="top" title="Top"><span>Top</span></a></li>
                
            </ul>
		

            <div class="clear"></div>
		</div>

        

		<div class="block-clear"></div></div></div></div><div class="block-footer"><span></span><div></div></div></div>
	</div>


	<div id="p343452" class="post">
		<div class="block-border block-block block-post"><div class="block-header"><span></span><div></div></div><div class="block-content"><div class="block-inner"><div class="block-inner2">
        <div class="post-maximize" style="display: none;"></div>
        <div class="post-profile-block">
        <div class="profile-block">
        <div class="postprofile">
            <div class="profile-top">
                <p class="profile-author">
                    <a class="profile-link popup-link" id="popup-link-14" href="javascript:void(0);">RimShot</a>
                </p>
                
            </div>
            

            <div class="profile-details">
                
            </div>
		</div>
		</div>
		</div>
		

        
		<div class="postbody">
		    <div class="post-content">
			

			<p class="author"><a href=""><img src="./styles/ca_orbital/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" /></a> Fri Dec 03, 2004 7:48 am <span class="post-author-inline" style="display: none;">by RimShot</span></p>

			<h3><a href="#p343452" class="post-subject"></a></h3>

			

			<div class="content">lol, interesting stuff ..
<br />
<br />and good luck with ur mod again</div>

			
            </div>

		
            <ul class="profile-icons">
        		<li class="top-icon"><a href="#top" class="top" title="Top"><span>Top</span></a></li>
                
            </ul>
		

            <div class="clear"></div>
		</div>

        

		<div class="block-clear"></div></div></div></div><div class="block-footer"><span></span><div></div></div></div>
	</div>



<div class="topic-actions">
	<div class="buttons" id="viewtopic-buttons">
	
		<div class="reply-icon"><a href="" title="Post a reply"><span></span>Post a reply</a></div>
	
	</div>

	
		<div class="pagination">
			15 posts
			 &bull; Page <strong>1</strong> of <strong>1</strong>
		</div>
	
</div>


	<p></p><p><a href="./viewforum.php_f=18" class="left-box left" accesskey="r">Return to Freelancer General Editing Forum</a></p>

	<br /><br />
</div>

<div>
	<a id="bottom" name="bottom" accesskey="z"></a>
</div>

	<div id="footer-clear">&nbsp;</div>
	<div class="copyright">
        <br />Hosted by <a href="https://the-starport.com">The Starport</a> &bull; Theme by <a href="https://www.stsoftware.biz/" ref="nofollow">ST Software</a>
	</div>


</div><!-- #global -->

</div>
</body>
</html>