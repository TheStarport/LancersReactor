<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-gb" xml:lang="en-gb">
<head>


<style type="text/css">
#global { width: 100%; }
</style>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="content-language" content="en-gb" />
<meta http-equiv="imagetoolbar" content="no" />


<title>Lancers Reactor Forums &bull; View topic - Custom Weapons - Fix, Rev and Pris nodes</title>

<link href="./styles/ca_orbital/theme/stylesheet.css" rel="stylesheet" type="text/css" media="screen, projection" />
<link media="only screen and (max-device-width: 480px)" href="./styles/ca_orbital/theme/iphone.css" type="text/css" rel="stylesheet" />

</head>

<body id="phpbb" class="section- ltr">
<div id="main">

<p class="top"><a id="top" name="top" accesskey="t"></a></p>

<div id="global" style="margin: 0 auto;">

    <p class="skiplink"><a href="#start_here">Skip to content</a></p>

	<!-- header start -->
    <div id="topnav">
        <div class="left"></div>
        <div class="right"></div>
        <ul class="linklist topnav leftside">
            <li>
                <a href="https://the-starport.com" title="The Starport">The Starport</a>
            </li>
            <li>
                <span>&bull;</span>
                <a href="https://the-starport.net/discord" title="The Starport Discord">Discord</a>
            </li>
        </ul>
    </div>
    

	<div id="logo"><a href="./index.php.html"><img src="./styles/ca_orbital/imageset/tlr_logo.png" alt="" title=""><span>Lancers Reactor Forums</span></a></div>
	<!-- header end -->

    <div id="page-header-msg">
		<div class="block-header"><span></span><div></div></div>
       <div class="block-content"><div class="block-inner"><div class="block-inner2">
            	
		<table width="100%">
			<tbody><tr><td style="text-align:center;width:100%;">

            <h2 style="color:red;">Important Message</h2>
            <h3>You are browsing the archived Lancers Reactor forums. You cannot register or login.<br>
            The content may be outdated and links may not be functional.</h3><br>
            <h4>To get the latest in Freelancer news, mods, modding and downloads, go to<br>
            	<a href="https://the-starport.com">The-Starport</a></h4>
    	</td></tr> 
    </tbody></table>
    
    	</div></div></div>
    <div class="block-footer"><span></span><div></div></div>
	</div>
    <p></p>
	<div id="page-header">
		<div class="navbar navbar-top" id="navbar-top">
            <div class="block-header"><span></span><div></div></div>
            <div class="block-content"><div class="block-inner"><div class="block-inner2">
            <ul class="linklist navlinks">
                <li class="icon-home"><span class="home-extra"><a href="./index.php.html" accesskey="h">Board index</a>  <strong>&#8249;</strong> <a href="./viewforum.php_f=75.html">Freelancer Editing</a> <strong>&#8249;</strong> </span><a href="./viewforum.php_f=18.html">Freelancer General Editing Forum</a></li>
            </ul>
            <div class="block-clear"></div>
            </div></div></div>
            <div class="block-footer"><span></span><div></div></div>
		</div>
	</div>
    <p></p>

	<a name="start_here"></a>

	<div id="page-body">
		<div id="content-start"></div>
<h2 class="leftside"><a href="./viewtopic.php_f=18_t=21579" id="topic-title">Custom Weapons - Fix, Rev and Pris nodes</a></h2>

<p class="rightside">
    
</p>
<div class="clear"></div>
<p class="forum-desc">The general place to discuss MOD''ing Freelancer! </p>

<div class="topic-actions">

	<div class="buttons">
	
		<div class="reply-icon"><a href="" title="Post a reply"><span></span>Post a reply</a></div>
	
	</div>

	
		<div class="pagination">
			4 posts
			 &bull; Page <strong>1</strong> of <strong>1</strong>
		</div>
	

</div>
<div class="clear"></div>


	<div id="p14752" class="post">
		<div class="block-border block-block block-post block-post-first"><div class="block-header"><span></span><div></div></div><div class="block-content"><div class="block-inner"><div class="block-inner2">
        <div class="post-maximize" style="display: none;"></div>
        <div class="post-profile-block">
        <div class="profile-block">
        <div class="postprofile">
            <div class="profile-top">
                <p class="profile-author">
                    <a class="profile-link popup-link" id="popup-link-0" href="javascript:void(0);">redeye</a>
                </p>
                
            </div>
            

            <div class="profile-details">
                
            </div>
		</div>
		</div>
		</div>
		

        
		<div class="postbody">
		    <div class="post-content">
			

			<p class="author"><a href=""><img src="./styles/ca_orbital/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" /></a> Fri Jul 18, 2003 11:34 pm <span class="post-author-inline" style="display: none;">by redeye</span></p>

			<h3 class="first"><a href="#p14752" class="post-subject">Custom Weapons - Fix, Rev and Pris nodes</a></h3>

			

			<div class="content">Does anyone know anything about any of the nodes under Cmpnd in a weapons .cmp file?  I have searched here and in tutorials but there doesnt seem to be anything about them.
<br />
<br />To be honest its mainly the 'Pris' node i am stumped with.  The Rev and FIx nodes appear very similar, both specify a parent object (for weapons the guns base) and a child object (the turret/barrel part of the gun).  There are barely a few hundred bytes apart from that.  The only part i understand is the x, y, z coordinates for the location of the child object.  However thats the only bit i have ever needed to change so far so i havnt investigated the rest of it. 
<br />
<br />I am fairly certain the axis that a guns turret/barrel rotates on is somewhere in the Rev or Pris nodes.  Apart from the x, y, z location of the turret relative to the base there is nothing in the Rev node which looks big enough to be an axis location (i am assuming the axis will be a minimum of a y and a z coordinate, if not and x, y and z therefore a minimum of 8 bytes, max of 12).  This leads me to believe it is in the Pris node but i am having no luck finding it there.
<br />
<br />If anyone has any info on the format/content of these nodes that would be great.</div>

			
            </div>

		
            <ul class="profile-icons">
        		<li class="top-icon"><a href="#top" class="top" title="Top"><span>Top</span></a></li>
                
            </ul>
		

            <div class="clear"></div>
		</div>

        

		<div class="block-clear"></div></div></div></div><div class="block-footer"><span></span><div></div></div></div>
	</div>


	<div id="p177487" class="post">
		<div class="block-border block-block block-post"><div class="block-header"><span></span><div></div></div><div class="block-content"><div class="block-inner"><div class="block-inner2">
        <div class="post-maximize" style="display: none;"></div>
        <div class="post-profile-block">
        <div class="profile-block">
        <div class="postprofile">
            <div class="profile-top">
                <p class="profile-author">
                    <a class="profile-link popup-link" id="popup-link-1" href="javascript:void(0);">Wild_Bill</a>
                </p>
                
            </div>
            

            <div class="profile-details">
                
            </div>
		</div>
		</div>
		</div>
		

        
		<div class="postbody">
		    <div class="post-content">
			

			<p class="author"><a href=""><img src="./styles/ca_orbital/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" /></a> Sat Jul 19, 2003 1:17 am <span class="post-author-inline" style="display: none;">by Wild_Bill</span></p>

			<h3><a href="#p177487" class="post-subject"></a></h3>

			

			<div class="content">check in the Noob questions thread.  That guy (cant remember his name)  is reaaly good about answering questions about modding
<br />
<br />We pray for one last landing on the globe that gave us birth, let us rest our eyes  an fleecy skies and the cool green hills of Earth!</div>

			
            </div>

		
            <ul class="profile-icons">
        		<li class="top-icon"><a href="#top" class="top" title="Top"><span>Top</span></a></li>
                
            </ul>
		

            <div class="clear"></div>
		</div>

        

		<div class="block-clear"></div></div></div></div><div class="block-footer"><span></span><div></div></div></div>
	</div>


	<div id="p177530" class="post">
		<div class="block-border block-block block-post"><div class="block-header"><span></span><div></div></div><div class="block-content"><div class="block-inner"><div class="block-inner2">
        <div class="post-maximize" style="display: none;"></div>
        <div class="post-profile-block">
        <div class="profile-block">
        <div class="postprofile">
            <div class="profile-top">
                <p class="profile-author">
                    <a class="profile-link popup-link" id="popup-link-2" href="javascript:void(0);">redeye</a>
                </p>
                
            </div>
            

            <div class="profile-details">
                
            </div>
		</div>
		</div>
		</div>
		

        
		<div class="postbody">
		    <div class="post-content">
			

			<p class="author"><a href=""><img src="./styles/ca_orbital/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" /></a> Sat Jul 19, 2003 3:46 am <span class="post-author-inline" style="display: none;">by redeye</span></p>

			<h3><a href="#p177530" class="post-subject"></a></h3>

			

			<div class="content">Yes, i see Accu-o-shot has been answering alot of queries, but i think it might be a bit cheeky to post this as a noob question <img src=smilies/icon_smile_wink.gif width=15 height=15 border=0 align=middle>  I was hoping someone had maybe come across this themselves but not worked out enough to start a post on it.
<br />
<br />As it happens i am not so sure that the axis is in the 'Pris' node anyway.  A second look shows that the Pris node is in the same format as the Rev/Fix node.  It has the turret as the parent node and the gun as the child.  The x, y, z coordinates of the child are in the same place.  If you replace all the data in the Pris node with 00's except 3 sets of 4 bytes which control the x, y, z scale of the child object and the 12 bytes which code the x, y, z location of the child, nothing appears to change.  
<br />
<br />Here is a summary of the basic layout of the Pris and Rev nodes :
<br />
<br /><b>Parent object name   </b> - Starts at offset 0
<br /><b>Child object name   </b> - Starts at offset 64
<br /><b>X, y, z coordinates of child object   </b> - Starts at offset 128 (3 floats = 12 bytes)
<br /><b>Second x, y, z coordinates   </b> - Starts at offset 140.  Unsure of purpose for this, it is usually at 0, 0, 0 but changing it has the same effect as changing the above values.
<br /><b>X scale of child object   </b> - Starts at offset 152
<br /><b>Y scale of child object   </b> - Starts at offset 168
<br /><b>Z scale of child object   </b> - Starts at offset 184
<br />
<br />The Fix node is the same except there is no second set of x, y, z cordinates so the offsets for the x, y and z scales are 12 bytes earlier (i.e. 140, 156, 172).
<br />
<br />The scale data is always the same - 00 00 80 3F which is 1 as a float.  What the point of this is eludes me, but if you mess around with it the object is displayed normally (bigger or smaller) but the gun wont fire.
<br />
<br />Like i said replacing all the data with 00 means the gun is not displayed (actually it is except the scale is 0 instead of 1 so you dont see it) however the turret rotates on the same axis.  It occured to me that replacing everything with 0's might not be disrupting the axis (it could have been o's before or floats that were very close to 0) so i replaced all the data with FF's.  Again the gun was not displayed but the turret rotated as normal on the same axis.
<br />
<br />This leads me to belive the axis is somewhere else, probably in the Animation nodes somewhere.  The only nagging doubt i have about this is that if you delete the Pris node completely the gun disappears and the turret is still there (as you would expect) but the turret does not rotate up and down anymore.
<br />
<br />The plot thickens.... <img src=smilies/icon_smile_wink.gif width=15 height=15 border=0 align=middle>  
<br />
<br />EDIT - Well turns out that the axis is not anywhere in the Animations nodes.  Completely deleting the Animations node certainly makes no difference to the rotation of the barrel and seems to make little difference to anything at all.  Back to the drawing board.
<br />
<br />Edited by - redeye on 19-07-2003 05:32:35</div>

			
            </div>

		
            <ul class="profile-icons">
        		<li class="top-icon"><a href="#top" class="top" title="Top"><span>Top</span></a></li>
                
            </ul>
		

            <div class="clear"></div>
		</div>

        

		<div class="block-clear"></div></div></div></div><div class="block-footer"><span></span><div></div></div></div>
	</div>


	<div id="p178366" class="post">
		<div class="block-border block-block block-post"><div class="block-header"><span></span><div></div></div><div class="block-content"><div class="block-inner"><div class="block-inner2">
        <div class="post-maximize" style="display: none;"></div>
        <div class="post-profile-block">
        <div class="profile-block">
        <div class="postprofile">
            <div class="profile-top">
                <p class="profile-author">
                    <a class="profile-link popup-link" id="popup-link-3" href="javascript:void(0);">redeye</a>
                </p>
                
            </div>
            

            <div class="profile-details">
                
            </div>
		</div>
		</div>
		</div>
		

        
		<div class="postbody">
		    <div class="post-content">
			

			<p class="author"><a href=""><img src="./styles/ca_orbital/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" /></a> Tue Jul 22, 2003 4:07 am <span class="post-author-inline" style="display: none;">by redeye</span></p>

			<h3><a href="#p178366" class="post-subject"></a></h3>

			

			<div class="content">I will try and add a proper custom weapons bit to the Ships/Weapons with multiple components tutorial soon, but in the meantime here is the axis info.
<br />
<br />As usual it had been staring me in the face the whole time.  The axis the turret/barrel rotates on is just the x, y, z origin of the component.  As i had assumed i knew what that bit did i had never thought to mess around with it.  Normal weapons are coded the same way as ships with the coordinates for all the components as if they were all built around the origin as separate models instead of being different parts of the same model.  So if you could import the .cmp for the Blood Dragon into milkshape you would only see the hull because the wings/tail/engine would be centred on the origin and hidden by the hull.
<br />
<br />As this would have been alot of trouble to simulate with custom models i had simply been making the model as normal (in this case i am actually working with one of Wanderer's models) then changing the origin for the component to 0, 0, 0 and the parts fitted together correctly.  So to pick the axis for a gun you will either have to design it the way the game weapons are, and fiddle about to find the correct origin for you component (probably by sticking a few fake Hps on the main body of the gun) or just make the model with the turret/barrel axis on the origin and use 0, 0, 0 for the components origin.
<br />
<br />EDIT - I am sure the fact that only Rev + Pris nodes have a second set of floats for x, y, z location of component is significant here.  As the only difference between a Rev/Pris node and a Fix node is that the objects in the Rev/Pris node can rotate around an axis and the Fix ones cant i'm sure it will turn out to be relevant.  In retrospect this was another obvious clue i missed <img src=smilies/icon_smile_wink.gif width=15 height=15 border=0 align=middle>
<br />
<br />Edited by - redeye on 22-07-2003 05:11:10</div>

			
            </div>

		
            <ul class="profile-icons">
        		<li class="top-icon"><a href="#top" class="top" title="Top"><span>Top</span></a></li>
                
            </ul>
		

            <div class="clear"></div>
		</div>

        

		<div class="block-clear"></div></div></div></div><div class="block-footer"><span></span><div></div></div></div>
	</div>



<div class="topic-actions">
	<div class="buttons" id="viewtopic-buttons">
	
		<div class="reply-icon"><a href="" title="Post a reply"><span></span>Post a reply</a></div>
	
	</div>

	
		<div class="pagination">
			4 posts
			 &bull; Page <strong>1</strong> of <strong>1</strong>
		</div>
	
</div>


	<p></p><p><a href="./viewforum.php_f=18" class="left-box left" accesskey="r">Return to Freelancer General Editing Forum</a></p>

	<br /><br />
</div>

<div>
	<a id="bottom" name="bottom" accesskey="z"></a>
</div>

	<div id="footer-clear">&nbsp;</div>
	<div class="copyright">
        <br />Hosted by <a href="https://the-starport.com">The Starport</a> &bull; Theme by <a href="https://www.stsoftware.biz/" ref="nofollow">ST Software</a>
	</div>


</div><!-- #global -->

</div>
</body>
</html>