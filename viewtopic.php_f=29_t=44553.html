<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-gb" xml:lang="en-gb">
<head>


<style type="text/css">
#global { width: 100%; }
</style>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="content-language" content="en-gb" />
<meta http-equiv="imagetoolbar" content="no" />


<title>Lancers Reactor Forums &bull; View topic - **Tutorial** Making explosions damage capship shields</title>

<link href="./styles/ca_orbital/theme/stylesheet.css" rel="stylesheet" type="text/css" media="screen, projection" />
<link media="only screen and (max-device-width: 480px)" href="./styles/ca_orbital/theme/iphone.css" type="text/css" rel="stylesheet" />

</head>

<body id="phpbb" class="section- ltr">
<div id="main">

<p class="top"><a id="top" name="top" accesskey="t"></a></p>

<div id="global" style="margin: 0 auto;">

    <p class="skiplink"><a href="#start_here">Skip to content</a></p>

	<!-- header start -->
    <div id="topnav">
        <div class="left"></div>
        <div class="right"></div>
        <ul class="linklist topnav leftside">
            <li>
                <a href="https://the-starport.com" title="The Starport">The Starport</a>
            </li>
            <li>
                <span>&bull;</span>
                <a href="https://the-starport.net/discord" title="The Starport Discord">Discord</a>
            </li>
        </ul>
    </div>
    

	<div id="logo"><a href="./index.php.html"><img src="./styles/ca_orbital/imageset/tlr_logo.png" alt="" title=""><span>Lancers Reactor Forums</span></a></div>
	<!-- header end -->

    <div id="page-header-msg">
		<div class="block-header"><span></span><div></div></div>
       <div class="block-content"><div class="block-inner"><div class="block-inner2">
            	
		<table width="100%">
			<tbody><tr><td style="text-align:center;width:100%;">

            <h2 style="color:red;">Important Message</h2>
            <h3>You are browsing the archived Lancers Reactor forums. You cannot register or login.<br>
            The content may be outdated and links may not be functional.</h3><br>
            <h4>To get the latest in Freelancer news, mods, modding and downloads, go to<br>
            	<a href="https://the-starport.com">The-Starport</a></h4>
    	</td></tr> 
    </tbody></table>
    
    	</div></div></div>
    <div class="block-footer"><span></span><div></div></div>
	</div>
    <p></p>
	<div id="page-header">
		<div class="navbar navbar-top" id="navbar-top">
            <div class="block-header"><span></span><div></div></div>
            <div class="block-content"><div class="block-inner"><div class="block-inner2">
            <ul class="linklist navlinks">
                <li class="icon-home"><span class="home-extra"><a href="./index.php.html" accesskey="h">Board index</a>  <strong>&#8249;</strong> <a href="./viewforum.php_f=75.html">Freelancer Editing</a> <strong>&#8249;</strong> </span><a href="./viewforum.php_f=29.html">Freelancer Editing Tutorial Forum</a></li>
            </ul>
            <div class="block-clear"></div>
            </div></div></div>
            <div class="block-footer"><span></span><div></div></div>
		</div>
	</div>
    <p></p>

	<a name="start_here"></a>

	<div id="page-body">
		<div id="content-start"></div>
<h2 class="leftside"><a href="./viewtopic.php_f=29_t=44553" id="topic-title">**Tutorial** Making explosions damage capship shields</a></h2>

<p class="rightside">
    
</p>
<div class="clear"></div>
<p class="forum-desc">Here you find the different tutorials on editing and MODing Freelancer</p>

<div class="topic-actions">

	<div class="buttons">
	
		<div class="reply-icon"><a href="" title="Post a reply"><span></span>Post a reply</a></div>
	
	</div>

	
		<div class="pagination">
			1 post
			 &bull; Page <strong>1</strong> of <strong>1</strong>
		</div>
	

</div>
<div class="clear"></div>


	<div id="p34038" class="post">
		<div class="block-border block-block block-post block-post-first"><div class="block-header"><span></span><div></div></div><div class="block-content"><div class="block-inner"><div class="block-inner2">
        <div class="post-maximize" style="display: none;"></div>
        <div class="post-profile-block">
        <div class="profile-block">
        <div class="postprofile">
            <div class="profile-top">
                <p class="profile-author">
                    <a class="profile-link popup-link" id="popup-link-0" href="javascript:void(0);">Dev</a>
                </p>
                
            </div>
            

            <div class="profile-details">
                
            </div>
		</div>
		</div>
		</div>
		

        
		<div class="postbody">
		    <div class="post-content">
			

			<p class="author"><a href=""><img src="./styles/ca_orbital/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" /></a> Thu Aug 31, 2006 3:53 pm <span class="post-author-inline" style="display: none;">by Dev</span></p>

			<h3 class="first"><a href="#p34038" class="post-subject">**Tutorial** Making explosions damage capship shields</a></h3>

			

			<div class="content">Large shields will very often not register damage from explosions.  You can try to work around this by increasing the radius of the explosion, but that comes with all kinds of unwanted side effects.  A better solution is to directly modify the shield surface, like so:
<br />
<br />First off, find the shield surface you want to modify.  In shiparch.ini, find the shield link of your ship:
<br />
<br />[Ship
<br />...
<br />nickname = li_fighter
<br />...
<br />shield_link = l_fighter_shield01, HpMount, HpShield01
<br />...
<br />
<br />l_fighter_shield01 is a reference to a shield defined in select_equip.ini:
<br />
<br />[Shield
<br />nickname = l_fighter_shield01
<br />DA_archetype = Ships\liberty\li_fighter\li_fighter_shield.3db
<br />HP_child = SpConnect
<br />
<br />ships\liberty\li_fighter\li_fighter_shield.3db is a real file, but it is pretty much empty.  However, it is linked (by name) to a .sur file, li_fighter_shield.sur.  Open the .sur file using a hex editor (such as <a href='http://www.chmaas.handshake.de/delphi/freeware/xvi32/xvi32.htm' Target=_Blank>this one</a>).  You may also want to use flmodeltool to help you find the values that you want to change.
<br />
<br />The things to change are the two radius values, both of which are in 4-byte single-precision floating point format.  The first radius value is found 28 bytes after the end of &quot;surf&quot;, near the beginning of the file.  This is the more important of the two values, and it must be set to something large.  You can start with the radius of the ship as suggested by flmodeltool, or perhaps you can determine it for yourself, but in general I have found that I need to set the value even higher.  For example, on the star destroyer model I use, the bow of the ship is a bit over 900 meters from the ship center (so the engines are about 700 meters aft of center).  However, the radius value is set to 1500, and this was pretty much the lowest value I could go with and still have reliable explosion detection everywhere on the ship.  My suggestion is to keep trying until you get it down to the absolute minimum, so that you don't get unexpected detection.
<br />
<br />The second radius value is found starting 8 bytes back from the end of the file.  This one does not seem to be as critical to explosion detection, though you might as well set it to the actual radius of the ship.  Note that if you make this value larger than the radius of the hull of the ship, it will take precedence over the hull in determining the distance to the ship.  In other words, if you make it 10k and your ship is only 200 meters long, another player can be 10 kilometers away from you but the HUD will say you are 0 meters away.  It's kind of silly.
<br />
<br />A recap of the layout for a shield surface .sur file:
<br />
<br />&quot;vers&quot; (4 bytes)
<br />Header stuff... (typically 44 bytes)
<br />&quot;surf&quot; (4 bytes)
<br />other stuff... (28 bytes)
<br />-&gt; first_radius_value (4 bytes)
<br />lots of other stuff... (length varies)
<br />-&gt; second_radius_value (4 bytes)
<br />last four bytes... (4 bytes)
<br />end of file
<br />
<br />The method has been tried and tested repeatedly on ships ranging from 100 meters to over a kilometer, so as far as I know there aren't any problems with it.</div>

			
            </div>

		
            <ul class="profile-icons">
        		<li class="top-icon"><a href="#top" class="top" title="Top"><span>Top</span></a></li>
                
            </ul>
		

            <div class="clear"></div>
		</div>

        

		<div class="block-clear"></div></div></div></div><div class="block-footer"><span></span><div></div></div></div>
	</div>



<div class="topic-actions">
	<div class="buttons" id="viewtopic-buttons">
	
		<div class="reply-icon"><a href="" title="Post a reply"><span></span>Post a reply</a></div>
	
	</div>

	
		<div class="pagination">
			1 post
			 &bull; Page <strong>1</strong> of <strong>1</strong>
		</div>
	
</div>


	<p></p><p><a href="./viewforum.php_f=29" class="left-box left" accesskey="r">Return to Freelancer Editing Tutorial Forum</a></p>

	<br /><br />
</div>

<div>
	<a id="bottom" name="bottom" accesskey="z"></a>
</div>

	<div id="footer-clear">&nbsp;</div>
	<div class="copyright">
        <br />Hosted by <a href="https://the-starport.com">The Starport</a> &bull; Theme by <a href="https://www.stsoftware.biz/" ref="nofollow">ST Software</a>
	</div>


</div><!-- #global -->

</div>
</body>
</html>