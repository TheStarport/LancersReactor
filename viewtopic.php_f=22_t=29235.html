<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-gb" xml:lang="en-gb">
<head>


<style type="text/css">
#global { width: 100%; }
</style>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="content-language" content="en-gb" />
<meta http-equiv="imagetoolbar" content="no" />


<title>Lancers Reactor Forums &bull; View topic - Anyone using 2 broadband conns with a dual WAN gateway?</title>

<link href="./styles/ca_orbital/theme/stylesheet.css" rel="stylesheet" type="text/css" media="screen, projection" />
<link media="only screen and (max-device-width: 480px)" href="./styles/ca_orbital/theme/iphone.css" type="text/css" rel="stylesheet" />

</head>

<body id="phpbb" class="section- ltr">
<div id="main">

<p class="top"><a id="top" name="top" accesskey="t"></a></p>

<div id="global" style="margin: 0 auto;">

    <p class="skiplink"><a href="#start_here">Skip to content</a></p>

	<!-- header start -->
    <div id="topnav">
        <div class="left"></div>
        <div class="right"></div>
        <ul class="linklist topnav leftside">
            <li>
                <a href="https://the-starport.com" title="The Starport">The Starport</a>
            </li>
            <li>
                <span>&bull;</span>
                <a href="https://the-starport.net/discord" title="The Starport Discord">Discord</a>
            </li>
        </ul>
    </div>
    

	<div id="logo"><a href="./index.php.html"><img src="./styles/ca_orbital/imageset/tlr_logo.png" alt="" title=""><span>Lancers Reactor Forums</span></a></div>
	<!-- header end -->

    <div id="page-header-msg">
		<div class="block-header"><span></span><div></div></div>
       <div class="block-content"><div class="block-inner"><div class="block-inner2">
            	
		<table width="100%">
			<tbody><tr><td style="text-align:center;width:100%;">

            <h2 style="color:red;">Important Message</h2>
            <h3>You are browsing the archived Lancers Reactor forums. You cannot register or login.<br>
            The content may be outdated and links may not be functional.</h3><br>
            <h4>To get the latest in Freelancer news, mods, modding and downloads, go to<br>
            	<a href="https://the-starport.com">The-Starport</a></h4>
    	</td></tr> 
    </tbody></table>
    
    	</div></div></div>
    <div class="block-footer"><span></span><div></div></div>
	</div>
    <p></p>
	<div id="page-header">
		<div class="navbar navbar-top" id="navbar-top">
            <div class="block-header"><span></span><div></div></div>
            <div class="block-content"><div class="block-inner"><div class="block-inner2">
            <ul class="linklist navlinks">
                <li class="icon-home"><span class="home-extra"><a href="./index.php.html" accesskey="h">Board index</a>  <strong>&#8249;</strong> <a href="./viewforum.php_f=74.html">Freelancer</a> <strong>&#8249;</strong> </span><a href="./viewforum.php_f=22.html">Freelancer Server Forum</a></li>
            </ul>
            <div class="block-clear"></div>
            </div></div></div>
            <div class="block-footer"><span></span><div></div></div>
		</div>
	</div>
    <p></p>

	<a name="start_here"></a>

	<div id="page-body">
		<div id="content-start"></div>
<h2 class="leftside"><a href="./viewtopic.php_f=22_t=29235" id="topic-title">Anyone using 2 broadband conns with a dual WAN gateway?</a></h2>

<p class="rightside">
    
</p>
<div class="clear"></div>
<p class="forum-desc">Here SysOps can list their MultiPlayer server info and users can send feedback to their SysOps. Or just talk about the MultiPlayer  servers they play on. This is not about MultiPlayer in general - please use the MultiPlayer Forum for that!</p>

<div class="topic-actions">

	<div class="buttons">
	
		<div class="reply-icon"><a href="" title="Post a reply"><span></span>Post a reply</a></div>
	
	</div>

	
		<div class="pagination">
			5 posts
			 &bull; Page <strong>1</strong> of <strong>1</strong>
		</div>
	

</div>
<div class="clear"></div>


	<div id="p21441" class="post">
		<div class="block-border block-block block-post block-post-first"><div class="block-header"><span></span><div></div></div><div class="block-content"><div class="block-inner"><div class="block-inner2">
        <div class="post-maximize" style="display: none;"></div>
        <div class="post-profile-block">
        <div class="profile-block">
        <div class="postprofile">
            <div class="profile-top">
                <p class="profile-author">
                    <a class="profile-link popup-link" id="popup-link-0" href="javascript:void(0);">Earendil</a>
                </p>
                
            </div>
            

            <div class="profile-details">
                
            </div>
		</div>
		</div>
		</div>
		

        
		<div class="postbody">
		    <div class="post-content">
			

			<p class="author"><a href=""><img src="./styles/ca_orbital/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" /></a> Mon Mar 08, 2004 2:46 pm <span class="post-author-inline" style="display: none;">by Earendil</span></p>

			<h3 class="first"><a href="#p21441" class="post-subject">Anyone using 2 broadband conns with a dual WAN gateway?</a></h3>

			

			<div class="content">I just got cable after using ADSL exclusively for a long time to host Boston.  I also got a dual WAN gateway (some people call them routers but they do MUCH more than just routing) complete with output load balancing, no cheap box.
<br />
<br />Technically I should have double the bandwidth.  Now you might wonder why, hehe, so did I until I remembered something.  I once tried to see if I could host Boston on a faster server.  For a while I was running two servers.  Players in the real world were seeing on the FL global list server sometimes the IP address for Boston and sometimes for the test server.  It depended on flserver's update time which was viewed before it got overwritten by the other.  Also the server's own MP ID (nothing to do with a player's FL MP ID) was identical so it was overlapping.
<br />
<br />Well with the dual WAN gateway with load balancing flserver was sending out info to the FL global list server sometimes on cable (WAN2) and sometimes on ADSL WAN1).  This means assuming an equal distribution of time on each, players were logging onto the server through both WAN connections.  Hence instead of just output load balancing I get a kind of input load balancing as well!  Sounds great, yes? <img src=smilies/icon_smile_question.gif width=15 height=15 border=0 align=middle>
<br />
<br />No. <img src=smilies/icon_smile_sad.gif width=15 height=15 border=0 align=middle> I have significant lag issues and triple the incidence of kick&amp;bans.  A protocol anaylzer doesn't show me any obvious problems.  I am communicating with the gateway manufacturer to determine if they could recreate the situation.  Until then I have had to bind the server to the cable connection.  Makes having the fancy load balancing look pretty useless.  If it only worked! <img src=smilies/icon_smile_approve.gif width=15 height=15 border=0 align=middle>
<br />
<br />Well I'm curious if anyone else has considered or has actually used 2 broadband connections or a dual WAN gateway.
<br />
<br />---------------
<br />Earendil
<br />SysAdmin of Boston Freelancer server
<br />See <a href='http://www.earendilsplace.net/forum/viewthread.php?tid=153' Target=_Blank>server rules</a> and <a href='http://www.earendilsplace.net/forum/viewthread.php?tid=3' Target=_Blank>server news</a> for more info.</div>

			
            </div>

		
            <ul class="profile-icons">
        		<li class="top-icon"><a href="#top" class="top" title="Top"><span>Top</span></a></li>
                
            </ul>
		

            <div class="clear"></div>
		</div>

        

		<div class="block-clear"></div></div></div></div><div class="block-footer"><span></span><div></div></div></div>
	</div>


	<div id="p258730" class="post">
		<div class="block-border block-block block-post"><div class="block-header"><span></span><div></div></div><div class="block-content"><div class="block-inner"><div class="block-inner2">
        <div class="post-maximize" style="display: none;"></div>
        <div class="post-profile-block">
        <div class="profile-block">
        <div class="postprofile">
            <div class="profile-top">
                <p class="profile-author">
                    <a class="profile-link popup-link" id="popup-link-1" href="javascript:void(0);">shaitanro</a>
                </p>
                
            </div>
            

            <div class="profile-details">
                
            </div>
		</div>
		</div>
		</div>
		

        
		<div class="postbody">
		    <div class="post-content">
			

			<p class="author"><a href=""><img src="./styles/ca_orbital/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" /></a> Mon Mar 08, 2004 3:49 pm <span class="post-author-inline" style="display: none;">by shaitanro</span></p>

			<h3><a href="#p258730" class="post-subject"></a></h3>

			

			<div class="content">If you want to do an efficient load balancing you should have the same bandwidth on both WICs and very similar line delays (ping do next hop /2).
<br />I do have one server with two connections, but they are both Optical Fiber and with the same IP (so no one can tell when one falls). But since I have 8 Mbps minimum bandwidth guaranteed for one of them and only two for the other one I don't do load balancing.
<br />
<br />Anyway I have at home one ADSL and one CATV links, with different IPs and I can tell you that load balancing for theese conditions is pure theory (meaning you can do it, but it wouldn't necesary work).
<br />
<br />If you want to you could route all clients through one connection (eg. ADSL) and some of them (whom IP adresses you know) route them through the other connection. If it's a Cisco router you have, I can provide with a config template for such a routing configuration.
<br />
<br />See server forum <a href='http://www.shaitan.ro/freelancer/' Target=_Blank>here</a>.</div>

			
            </div>

		
            <ul class="profile-icons">
        		<li class="top-icon"><a href="#top" class="top" title="Top"><span>Top</span></a></li>
                
            </ul>
		

            <div class="clear"></div>
		</div>

        

		<div class="block-clear"></div></div></div></div><div class="block-footer"><span></span><div></div></div></div>
	</div>


	<div id="p259020" class="post">
		<div class="block-border block-block block-post"><div class="block-header"><span></span><div></div></div><div class="block-content"><div class="block-inner"><div class="block-inner2">
        <div class="post-maximize" style="display: none;"></div>
        <div class="post-profile-block">
        <div class="profile-block">
        <div class="postprofile">
            <div class="profile-top">
                <p class="profile-author">
                    <a class="profile-link popup-link" id="popup-link-2" href="javascript:void(0);">Earendil</a>
                </p>
                
            </div>
            

            <div class="profile-details">
                
            </div>
		</div>
		</div>
		</div>
		

        
		<div class="postbody">
		    <div class="post-content">
			

			<p class="author"><a href=""><img src="./styles/ca_orbital/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" /></a> Tue Mar 09, 2004 8:03 am <span class="post-author-inline" style="display: none;">by Earendil</span></p>

			<h3><a href="#p259020" class="post-subject"></a></h3>

			

			<div class="content">The gateway is a Xincom XC-DPG502.  Except for the cable downlink being twice the speed of ADSL, they are similar in uplink.  The load balancing IS working, I can see that in the gateway status, in WAN port indications and the protocol analyzer stream.  When I leave it 50-50 for load balancing bytes and no binding I tend to get more ADSL traffic than cable.  I think that happens not due to the gateway but because flserver is getting more exposure through ADSL vs cable on the global list server so players logging on more in ADSL instead of cable.  The session amounts for each WAN connection bear witness to this.
<br />
<br />Xincom wants packet capture logs during the lag times.  Hopefully they will see something I don't see.  I do see through the gateway's status screen no errors, some dropped packets and LOTS of retries.  At the risk of sounding dumb, does this mean anything?
<br />
<br />---------------
<br />Earendil
<br />SysAdmin of Boston Freelancer server
<br />See <a href='http://www.earendilsplace.net/forum/viewthread.php?tid=153' Target=_Blank>server rules</a> and <a href='http://www.earendilsplace.net/forum/viewthread.php?tid=3' Target=_Blank>server news</a> for more info.</div>

			
            </div>

		
            <ul class="profile-icons">
        		<li class="top-icon"><a href="#top" class="top" title="Top"><span>Top</span></a></li>
                
            </ul>
		

            <div class="clear"></div>
		</div>

        

		<div class="block-clear"></div></div></div></div><div class="block-footer"><span></span><div></div></div></div>
	</div>


	<div id="p259172" class="post">
		<div class="block-border block-block block-post"><div class="block-header"><span></span><div></div></div><div class="block-content"><div class="block-inner"><div class="block-inner2">
        <div class="post-maximize" style="display: none;"></div>
        <div class="post-profile-block">
        <div class="profile-block">
        <div class="postprofile">
            <div class="profile-top">
                <p class="profile-author">
                    <a class="profile-link popup-link" id="popup-link-3" href="javascript:void(0);">shaitanro</a>
                </p>
                
            </div>
            

            <div class="profile-details">
                
            </div>
		</div>
		</div>
		</div>
		

        
		<div class="postbody">
		    <div class="post-content">
			

			<p class="author"><a href=""><img src="./styles/ca_orbital/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" /></a> Tue Mar 09, 2004 2:32 pm <span class="post-author-inline" style="display: none;">by shaitanro</span></p>

			<h3><a href="#p259172" class="post-subject"></a></h3>

			

			<div class="content">If you have different IP adresses on the server for the two connections perhaps you should consider this, if not, disregard:
<br />Let's presume you have IP address A.A.A.A on the ADSL interface and IP address C.C.C.C. So one Freelancer client sends a request to the server on address A.A.A.A. The router due to load balancing will send some packets from IP address A.A.A.A and some other packets from IP address C.C.C.C, but on the client side IP packets with source adress C.C.C.C will be droped and the client will rerequest the transmition. If you have a single IP address for the server then this should not be the case.
<br />
<br />
<br />See server forum <a href='http://wwh.shaitan.ro/freelancer/' Target=_Blank>here</a>.</div>

			
            </div>

		
            <ul class="profile-icons">
        		<li class="top-icon"><a href="#top" class="top" title="Top"><span>Top</span></a></li>
                
            </ul>
		

            <div class="clear"></div>
		</div>

        

		<div class="block-clear"></div></div></div></div><div class="block-footer"><span></span><div></div></div></div>
	</div>


	<div id="p259296" class="post">
		<div class="block-border block-block block-post"><div class="block-header"><span></span><div></div></div><div class="block-content"><div class="block-inner"><div class="block-inner2">
        <div class="post-maximize" style="display: none;"></div>
        <div class="post-profile-block">
        <div class="profile-block">
        <div class="postprofile">
            <div class="profile-top">
                <p class="profile-author">
                    <a class="profile-link popup-link" id="popup-link-4" href="javascript:void(0);">Earendil</a>
                </p>
                
            </div>
            

            <div class="profile-details">
                
            </div>
		</div>
		</div>
		</div>
		

        
		<div class="postbody">
		    <div class="post-content">
			

			<p class="author"><a href=""><img src="./styles/ca_orbital/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" /></a> Tue Mar 09, 2004 8:43 pm <span class="post-author-inline" style="display: none;">by Earendil</span></p>

			<h3><a href="#p259296" class="post-subject"></a></h3>

			

			<div class="content">I see and agree with everything you said except one thing.  Will the client FL drop packets from C.C.C.C just because they have a game opened on A.A.A.A?  I wonder.
<br />
<br />Well today's performance has left me a bit more confused.  I left the load balancing back on bytes, did NOT bind the server to the cable (WAN2) and let it run a bit.  This setup I had the first time I set it up but had loads of lag.  Today I have no lag.  Well what the global list server should see is the cable IP then the ADSL IP and back again.  Well the ADSL IP is winning by a long shot.  How do I know?  99% of my traffic is on the ADSL which means when someone wants to log in via the global server list they inevidably see the ADSL IP.  My players think I have solved the problem but I told them I am still trying to figure it all out.
<br />
<br />I am also getting a sinking feeling that my cable service is rotten and the problem isn't the gateway nor it's setup.  Need more testing...
<br />
<br />---------------
<br />Earendil
<br />SysAdmin of Boston Freelancer server
<br />See <a href='http://www.earendilsplace.net/forum/viewthread.php?tid=153' Target=_Blank>server rules</a> and <a href='http://www.earendilsplace.net/forum/viewthread.php?tid=3' Target=_Blank>server news</a> for more info.</div>

			
            </div>

		
            <ul class="profile-icons">
        		<li class="top-icon"><a href="#top" class="top" title="Top"><span>Top</span></a></li>
                
            </ul>
		

            <div class="clear"></div>
		</div>

        

		<div class="block-clear"></div></div></div></div><div class="block-footer"><span></span><div></div></div></div>
	</div>



<div class="topic-actions">
	<div class="buttons" id="viewtopic-buttons">
	
		<div class="reply-icon"><a href="" title="Post a reply"><span></span>Post a reply</a></div>
	
	</div>

	
		<div class="pagination">
			5 posts
			 &bull; Page <strong>1</strong> of <strong>1</strong>
		</div>
	
</div>


	<p></p><p><a href="./viewforum.php_f=22" class="left-box left" accesskey="r">Return to Freelancer Server Forum</a></p>

	<br /><br />
</div>

<div>
	<a id="bottom" name="bottom" accesskey="z"></a>
</div>

	<div id="footer-clear">&nbsp;</div>
	<div class="copyright">
        <br />Hosted by <a href="https://the-starport.com">The Starport</a> &bull; Theme by <a href="https://www.stsoftware.biz/" ref="nofollow">ST Software</a>
	</div>


</div><!-- #global -->

</div>
</body>
</html>