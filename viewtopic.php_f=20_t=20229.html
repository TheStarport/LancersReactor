<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-gb" xml:lang="en-gb">
<head>


<style type="text/css">
#global { width: 100%; }
</style>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="content-language" content="en-gb" />
<meta http-equiv="imagetoolbar" content="no" />


<title>Lancers Reactor Forums &bull; View topic - Is anyone running a server behind Linux/Unix/freeBSD router?</title>

<link href="./styles/ca_orbital/theme/stylesheet.css" rel="stylesheet" type="text/css" media="screen, projection" />
<link media="only screen and (max-device-width: 480px)" href="./styles/ca_orbital/theme/iphone.css" type="text/css" rel="stylesheet" />

</head>

<body id="phpbb" class="section- ltr">
<div id="main">

<p class="top"><a id="top" name="top" accesskey="t"></a></p>

<div id="global" style="margin: 0 auto;">

    <p class="skiplink"><a href="#start_here">Skip to content</a></p>

	<!-- header start -->
    <div id="topnav">
        <div class="left"></div>
        <div class="right"></div>
        <ul class="linklist topnav leftside">
            <li>
                <a href="https://the-starport.com" title="The Starport">The Starport</a>
            </li>
            <li>
                <span>&bull;</span>
                <a href="https://the-starport.net/discord" title="The Starport Discord">Discord</a>
            </li>
        </ul>
    </div>
    

	<div id="logo"><a href="./index.php.html"><img src="./styles/ca_orbital/imageset/tlr_logo.png" alt="" title=""><span>Lancers Reactor Forums</span></a></div>
	<!-- header end -->

    <div id="page-header-msg">
		<div class="block-header"><span></span><div></div></div>
       <div class="block-content"><div class="block-inner"><div class="block-inner2">
            	
		<table width="100%">
			<tbody><tr><td style="text-align:center;width:100%;">

            <h2 style="color:red;">Important Message</h2>
            <h3>You are browsing the archived Lancers Reactor forums. You cannot register or login.<br>
            The content may be outdated and links may not be functional.</h3><br>
            <h4>To get the latest in Freelancer news, mods, modding and downloads, go to<br>
            	<a href="https://the-starport.com">The-Starport</a></h4>
    	</td></tr> 
    </tbody></table>
    
    	</div></div></div>
    <div class="block-footer"><span></span><div></div></div>
	</div>
    <p></p>
	<div id="page-header">
		<div class="navbar navbar-top" id="navbar-top">
            <div class="block-header"><span></span><div></div></div>
            <div class="block-content"><div class="block-inner"><div class="block-inner2">
            <ul class="linklist navlinks">
                <li class="icon-home"><span class="home-extra"><a href="./index.php.html" accesskey="h">Board index</a>  <strong>&#8249;</strong> <a href="./viewforum.php_f=74.html">Freelancer</a> <strong>&#8249;</strong> </span><a href="./viewforum.php_f=20.html">Freelancer Technical Issues</a></li>
            </ul>
            <div class="block-clear"></div>
            </div></div></div>
            <div class="block-footer"><span></span><div></div></div>
		</div>
	</div>
    <p></p>

	<a name="start_here"></a>

	<div id="page-body">
		<div id="content-start"></div>
<h2 class="leftside"><a href="./viewtopic.php_f=20_t=20229" id="topic-title">Is anyone running a server behind Linux/Unix/freeBSD router?</a></h2>

<p class="rightside">
    
</p>
<div class="clear"></div>
<p class="forum-desc">The place to ask for technical help with running the demo or the full game...</p>

<div class="topic-actions">

	<div class="buttons">
	
		<div class="reply-icon"><a href="" title="Post a reply"><span></span>Post a reply</a></div>
	
	</div>

	
		<div class="pagination">
			6 posts
			 &bull; Page <strong>1</strong> of <strong>1</strong>
		</div>
	

</div>
<div class="clear"></div>


	<div id="p13518" class="post">
		<div class="block-border block-block block-post block-post-first"><div class="block-header"><span></span><div></div></div><div class="block-content"><div class="block-inner"><div class="block-inner2">
        <div class="post-maximize" style="display: none;"></div>
        <div class="post-profile-block">
        <div class="profile-block">
        <div class="postprofile">
            <div class="profile-top">
                <p class="profile-author">
                    <a class="profile-link popup-link" id="popup-link-0" href="javascript:void(0);">MyzTek</a>
                </p>
                
            </div>
            

            <div class="profile-details">
                
            </div>
		</div>
		</div>
		</div>
		

        
		<div class="postbody">
		    <div class="post-content">
			

			<p class="author"><a href=""><img src="./styles/ca_orbital/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" /></a> Thu Jun 26, 2003 5:51 am <span class="post-author-inline" style="display: none;">by MyzTek</span></p>

			<h3 class="first"><a href="#p13518" class="post-subject">Is anyone running a server behind Linux/Unix/freeBSD router?</a></h3>

			

			<div class="content">Ho Freelancers,
<br />
<br />This is my first post, but I have been reading all your posts as I work through the inevitable headaches that go with this wonderful, though buggy, game.
<br />
<br />Has anyone had experience running a freelancer server from behind a unix type router?  My home lan is connected to the internet (cable connection) through a router running freeBSD.  In ipf.rules I have opened ports 2300-2400, as well as two other ports which I have been told FL uses, 34505 and 47624.  In ipnat.rules I have redirected these ports to the computer running the server.  My server DOES show up in the list from the master server for people out there on the net, but when they try to connect, they recieve the message &quot;...taking longer than expected&quot; and are unable to connect.  From inside the LAN no problems are encountered.  I do not currently have a personnal firewall running on the computer running FLserver.exe.  I have tried several ipf/ipnat configurations to no avail.  Please advise.
<br />
<br />Thanking you in advance,
<br />MyzTek
<br />
<br />my email: <!-- e --><a href="mailto:FLisMScrack@removetoemail.myztek.com">FLisMScrack@removetoemail.myztek.com</a><!-- e -->
<br />my server: Clan-{BaKE}-Corsairs
<br />my web: <!-- m --><a class="postlink" href="http://myztek.com">http://myztek.com</a><!-- m --></div>

			
            </div>

		
            <ul class="profile-icons">
        		<li class="top-icon"><a href="#top" class="top" title="Top"><span>Top</span></a></li>
                
            </ul>
		

            <div class="clear"></div>
		</div>

        

		<div class="block-clear"></div></div></div></div><div class="block-footer"><span></span><div></div></div></div>
	</div>


	<div id="p167260" class="post">
		<div class="block-border block-block block-post"><div class="block-header"><span></span><div></div></div><div class="block-content"><div class="block-inner"><div class="block-inner2">
        <div class="post-maximize" style="display: none;"></div>
        <div class="post-profile-block">
        <div class="profile-block">
        <div class="postprofile">
            <div class="profile-top">
                <p class="profile-author">
                    <a class="profile-link popup-link" id="popup-link-1" href="javascript:void(0);">OpenSorce</a>
                </p>
                
            </div>
            

            <div class="profile-details">
                
            </div>
		</div>
		</div>
		</div>
		

        
		<div class="postbody">
		    <div class="post-content">
			

			<p class="author"><a href=""><img src="./styles/ca_orbital/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" /></a> Thu Jun 26, 2003 7:34 am <span class="post-author-inline" style="display: none;">by OpenSorce</span></p>

			<h3><a href="#p167260" class="post-subject"></a></h3>

			

			<div class="content">Our server runs behind a Linux firewall and here's how I did it:
<br />from the console
<br />&quot;
<br />iptables -t nat -A PREROUTING -p udp -i eth1 -d &lt;external IP&gt; --dport 2302 -j DNAT --to &lt;Internal IP of FL Server&gt;:2302
<br />iptables -t nat -A PREROUTING -p udp -i eth1 -d &lt;external IP&gt; --dport 2303 -j DNAT --to &lt;Internal IP of FL Server&gt;:2303
<br />iptables -t nat -A PREROUTING -p udp -i eth1 -d &lt;external IP&gt; --dport 2304 -j DNAT --to &lt;Internal IP of FL Server&gt;:2304
<br />iptables -A FORWARD -p udp -i eth1 -d &lt;Internal IP of FL Server&gt; --dport 2302 -j ACCEPT
<br />iptables -A FORWARD -p udp -i eth1 -d &lt;Internal IP of FL Server&gt; --dport 2303 -j ACCEPT
<br />iptables -A FORWARD -p udp -i eth1 -d &lt;Internal IP of FL Server&gt; --dport 2304 -j ACCEPT
<br />&quot;
<br />This is port forwarding from scratch, may or may not work for you, hope it helps <img src="./images/smilies/icon_smile.gif" alt=":-)" title="Smile" /></div>

			
            </div>

		
            <ul class="profile-icons">
        		<li class="top-icon"><a href="#top" class="top" title="Top"><span>Top</span></a></li>
                
            </ul>
		

            <div class="clear"></div>
		</div>

        

		<div class="block-clear"></div></div></div></div><div class="block-footer"><span></span><div></div></div></div>
	</div>


	<div id="p167292" class="post">
		<div class="block-border block-block block-post"><div class="block-header"><span></span><div></div></div><div class="block-content"><div class="block-inner"><div class="block-inner2">
        <div class="post-maximize" style="display: none;"></div>
        <div class="post-profile-block">
        <div class="profile-block">
        <div class="postprofile">
            <div class="profile-top">
                <p class="profile-author">
                    <a class="profile-link popup-link" id="popup-link-2" href="javascript:void(0);">MyzTek</a>
                </p>
                
            </div>
            

            <div class="profile-details">
                
            </div>
		</div>
		</div>
		</div>
		

        
		<div class="postbody">
		    <div class="post-content">
			

			<p class="author"><a href=""><img src="./styles/ca_orbital/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" /></a> Thu Jun 26, 2003 8:47 am <span class="post-author-inline" style="display: none;">by MyzTek</span></p>

			<h3><a href="#p167292" class="post-subject"></a></h3>

			

			<div class="content">Thanks for the suggestion, but I don't think freeBSD uses iptables at this point.  Your post did, however, get me thinking about which ethernet adapter I was opening those ports on, and I am going to review my ipnat and ipf files to be sure I wasn't doing it all backwards, I will let you know if it works, and if it does I will post the solution here for others who find themselves in this situation.  Simply knowing that linux firewall users have succeeded here has renewed my optimism.
<br />
<br />Thanks again!
<br />MyzTek</div>

			
            </div>

		
            <ul class="profile-icons">
        		<li class="top-icon"><a href="#top" class="top" title="Top"><span>Top</span></a></li>
                
            </ul>
		

            <div class="clear"></div>
		</div>

        

		<div class="block-clear"></div></div></div></div><div class="block-footer"><span></span><div></div></div></div>
	</div>


	<div id="p167321" class="post">
		<div class="block-border block-block block-post"><div class="block-header"><span></span><div></div></div><div class="block-content"><div class="block-inner"><div class="block-inner2">
        <div class="post-maximize" style="display: none;"></div>
        <div class="post-profile-block">
        <div class="profile-block">
        <div class="postprofile">
            <div class="profile-top">
                <p class="profile-author">
                    <a class="profile-link popup-link" id="popup-link-3" href="javascript:void(0);">OpenSorce</a>
                </p>
                
            </div>
            

            <div class="profile-details">
                
            </div>
		</div>
		</div>
		</div>
		

        
		<div class="postbody">
		    <div class="post-content">
			

			<p class="author"><a href=""><img src="./styles/ca_orbital/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" /></a> Thu Jun 26, 2003 10:05 am <span class="post-author-inline" style="display: none;">by OpenSorce</span></p>

			<h3><a href="#p167321" class="post-subject"></a></h3>

			

			<div class="content">Hey NP man! Check in #freebsd on the undernet IRC network. Those guys know everything <img src="./images/smilies/icon_smile.gif" alt=":-)" title="Smile" /> Otherwise you might search google for &quot;bsd port forwarding&quot;. Best of luck!</div>

			
            </div>

		
            <ul class="profile-icons">
        		<li class="top-icon"><a href="#top" class="top" title="Top"><span>Top</span></a></li>
                
            </ul>
		

            <div class="clear"></div>
		</div>

        

		<div class="block-clear"></div></div></div></div><div class="block-footer"><span></span><div></div></div></div>
	</div>


	<div id="p167636" class="post">
		<div class="block-border block-block block-post"><div class="block-header"><span></span><div></div></div><div class="block-content"><div class="block-inner"><div class="block-inner2">
        <div class="post-maximize" style="display: none;"></div>
        <div class="post-profile-block">
        <div class="profile-block">
        <div class="postprofile">
            <div class="profile-top">
                <p class="profile-author">
                    <a class="profile-link popup-link" id="popup-link-4" href="javascript:void(0);">MyzTek</a>
                </p>
                
            </div>
            

            <div class="profile-details">
                
            </div>
		</div>
		</div>
		</div>
		

        
		<div class="postbody">
		    <div class="post-content">
			

			<p class="author"><a href=""><img src="./styles/ca_orbital/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" /></a> Fri Jun 27, 2003 12:10 am <span class="post-author-inline" style="display: none;">by MyzTek</span></p>

			<h3><a href="#p167636" class="post-subject"></a></h3>

			

			<div class="content">Working solution for configuring a freeBSD firewall to allow users to connect to your flserver via the internet.  This solution requires that your freeBSD firewall be using ipf and ipnat.
<br />
<br />At the risk of making the post longer than necessary, I will try to be as thorough and clear as possible.
<br />
<br />You will need to edit two files, ipf.rules and ipnat.rules both of which can be found in the /etc directory.  Once the changes have been made and the files saved (you will need to be logged in as root to do so) ipf and ipnat rules will have to be reloaded for the change to take effect.
<br />
<br />in the file ipf.rules you will need to add the following lines:
<br />
<br />### Allow traffic for Freelancer
<br />pass in quick on dc0 proto udp from any to any port = 2300
<br />pass in quick on dc0 proto udp from any to any port = 2301
<br />pass in quick on dc0 proto udp from any to any port = 2302
<br />### change &quot;dc0&quot; in the above lines to the correct ethernet adapter in your system
<br />
<br />This will allow outside traffic on the freelancer ports into your system, basically removing firewall protection from these ports. This is a security risk to the entire network, but necessary for hosting internet MP FL.
<br />
<br />in the file ipnat.rules you will need to add the following lines:
<br />
<br />### Redirects - forward these ports to flserver ip
<br />rdr dc0 0.0.0.0/0 port 2302 -&gt; your.fl.server.ip port 2302 udp
<br />rdr dc0 0.0.0.0/0 port 2303 -&gt; your.fl.server.ip port 2303 udp
<br />rdr dc0 0.0.0.0/0 port 2304 -&gt; your.fl.server.ip port 2304 udp
<br />### change &quot;dc0&quot; in the above lines to the correct ethernet adapter in your system
<br />### change your.fl.server.ip to the correct LAN ip for the box running flserver.exe
<br />
<br />This will send all traffic recieved from the internet on the FL server ports to the computer in the LAN which is running the flserver.
<br />
<br />Now you will need to execute two commands to put your changes into effect, these flush the existing rules and read all the rules from the files:
<br />
<br />ipnat -F -f ipnat.rules
<br />
<br />ipf -Fa -f ipf.rules
<br />
<br />When you execute these commands, you may experience a temporary (few seconds max) interuption of your internet service, so don't panic when all your irc windows suddenly say &quot;DISCONNECTED&quot; <img src=smilies/icon_smile_wink.gif width=15 height=15 border=0 align=middle>
<br />
<br />I must emphasize that you make sure you replace &quot;dc0&quot; in the above examples with the correct address of your external (connected directly to the internet) adapter.  I spent three days pulling my hair out, trying to figure out why my server couldn't be connected to from outside, all because I got my external (dc0) and internal (r10) adapter addresses mixed up.  You can see how opening inside ports will not help outside players get in.
<br />
<br />You can probably find the address of your external adapter near the top of ipf.rules  The first rule should be similar to:
<br />
<br />pass out quick on dc0 proto tcp from any to any keep state
<br />
<br />Where you find &quot;dc0&quot; in the above rule, you will find your external adapter's address in yours.
<br />
<br />This thread now contains working solutions to the firewall problem for Linux and freeBSD (thanks again OpenSorce).
<br />
<br />Game On!
<br />-{MyzTek}-</div>

			
            </div>

		
            <ul class="profile-icons">
        		<li class="top-icon"><a href="#top" class="top" title="Top"><span>Top</span></a></li>
                
            </ul>
		

            <div class="clear"></div>
		</div>

        

		<div class="block-clear"></div></div></div></div><div class="block-footer"><span></span><div></div></div></div>
	</div>


	<div id="p167641" class="post">
		<div class="block-border block-block block-post"><div class="block-header"><span></span><div></div></div><div class="block-content"><div class="block-inner"><div class="block-inner2">
        <div class="post-maximize" style="display: none;"></div>
        <div class="post-profile-block">
        <div class="profile-block">
        <div class="postprofile">
            <div class="profile-top">
                <p class="profile-author">
                    <a class="profile-link popup-link" id="popup-link-5" href="javascript:void(0);">MyzTek</a>
                </p>
                
            </div>
            

            <div class="profile-details">
                
            </div>
		</div>
		</div>
		</div>
		

        
		<div class="postbody">
		    <div class="post-content">
			

			<p class="author"><a href=""><img src="./styles/ca_orbital/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" /></a> Fri Jun 27, 2003 12:21 am <span class="post-author-inline" style="display: none;">by MyzTek</span></p>

			<h3><a href="#p167641" class="post-subject"></a></h3>

			

			<div class="content">P.S.  You probably should not attempt this if you don't know anything about linux.  Doing this correctly effectively punches a hole in your firewall.  Doing this incorrectly can render your firewall completely useless.
<br />
<br />-{MyzTek}-</div>

			
            </div>

		
            <ul class="profile-icons">
        		<li class="top-icon"><a href="#top" class="top" title="Top"><span>Top</span></a></li>
                
            </ul>
		

            <div class="clear"></div>
		</div>

        

		<div class="block-clear"></div></div></div></div><div class="block-footer"><span></span><div></div></div></div>
	</div>



<div class="topic-actions">
	<div class="buttons" id="viewtopic-buttons">
	
		<div class="reply-icon"><a href="" title="Post a reply"><span></span>Post a reply</a></div>
	
	</div>

	
		<div class="pagination">
			6 posts
			 &bull; Page <strong>1</strong> of <strong>1</strong>
		</div>
	
</div>


	<p></p><p><a href="./viewforum.php_f=20" class="left-box left" accesskey="r">Return to Freelancer Technical Issues</a></p>

	<br /><br />
</div>

<div>
	<a id="bottom" name="bottom" accesskey="z"></a>
</div>

	<div id="footer-clear">&nbsp;</div>
	<div class="copyright">
        <br />Hosted by <a href="https://the-starport.com">The Starport</a> &bull; Theme by <a href="https://www.stsoftware.biz/" ref="nofollow">ST Software</a>
	</div>


</div><!-- #global -->

</div>
</body>
</html>